<!DOCTYPE html>
<html lang="en">
<head>


  <meta charset="UTF-8">

  
  <title>Session Auth Demo</title>

  


  <title>Session Auth Demo</title>



  





</head>
<body>
  <h1>Login</h1>
  <form id="login-form">

    


    <label>Username:</label>

    
    <input type="text" name="username" required><br><br>


    <label>Password:</label>


    <input type="password" name="password" required><br><br>



    <button type="submit">Login</button>
  </form>

  <hr>

  <button onclick="getDashboard()">Visit Dashboard</button>
  <button onclick="logout()">Logout</button>

  <h3 id="response"></h3>

  <script>
    const form = document.getElementById('login-form');
    const responseText = document.getElementById('response');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const data = {
        username: formData.get('username'),

        


        password: formData.get('password')
      };

      const res = await fetch('http://localhost:3000/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data),
        credentials: 'include'  // <-- Important to send/receive cookies
      });

      const text = await res.text();
      responseText.innerText = text;
    });

    async function getDashboard() {


      

      const res = await fetch('http://localhost:3000/dashboard', {

        



        credentials: 'include'








      });
      const text = await res.text();








      responseText.innerText = text;

      








    }

    async function logout()    {




      const res = await fetch('http://localhost:3000/logout'  , {
        credentials: 'include'
      });
      const text = await res.text();
      responseText.innerText = text;
    }
  </script>



</body>





</html>
